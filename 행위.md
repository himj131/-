# 행위

## 제어 흐름
- 순차적으로 실행하는 프로그램이 아닌 경우, 루프를 사용한 반복문이나, 조건과 예외를 사용한 제어 흐름을 만듦으로써 연산을 풍부하게 할 수 있다.  
- 제어 흐름은 관련된 것들끼리 모아서 처음 보는 사람도 쉽게 이해할 수 있게 하는 것이 좋다.

### 주요흐름
프로그래밍을 할 때 주요 흐름을 명확히 표현하고, 흔치 않은 상황이나 에러 상황은 예외와 조건절을 사용해 표현한다. 

## 제어흐름 처리 방법
### 1.메세지
- 메세지를 이용하는 경우 프로그램의 상태 변화가 중요해진다. 
- 메세지 발신자의 상태는 바뀌지 않지만 수신자의 상태는 바뀔 수 있다. 

### 2. 선택 메세지
- 명시적 조건문의 사용을 줄여 확장성을 높일 수 있다.
- 선택 메세지를 많이 사용하면, 세부 연산을 이해하기위해 여러개의 클래스를 살펴봐야 하는 불편함이 있다.
- 당장 연산의 변형이 필요하지 않다면, 선택 메세지를 사용할 필요가 없다.    

### 3. 더블 디스패치 
- 두개의 선택 메세지를 직렬로 연결  
    예)선택 메세지를 먼저 shape에 보낸후 Brush로 보내기 
    ```java
    displayShape (Shape subject, Brush brush) {
        subject.displayWith(brush);
    }
    ```
    각 Shape은 다른 방식으로 displayWith를 구현
    ```java
    Oval.displayWith(Brush brush) {
        brush.displayOval(this);
    }

    Rectangle.displayWith(Brush brush) {
        brush.displayOval(this);
    }
    ```
- 유연성을 조금 읽고, 코드 중복이 발생
- 비권장

### 4. 분리(순차) 메세지
- 여러 단계로 구성되는 복잡한 알고리즘이 있다면, 관련된 단계들을 모아 메세지로 보내기
- 코드의 흐름을 잘 이해할 수 있도록 메세지의 이름을 잘 만드는 것이 중요하다

### 5. 되돌림 메세지
- 대칭성을 이용해 가독성을 높임
- '미학적'만족을 위해 메소드를 만드는 것이 의미없다고 생각될 수 있다
- 하지만 코드에서의 미학은 코드 품질로 평가되는 일부로 생각보다 중요하다

### 6. 초청 메세지
- 하위클래스의 어떤 연산을 변형시킬 여지가 있다면, 적절한 메소드 이름을 통해 변형의 여지를 마련해줘야한다. 
- 목적에 맞게 연산을 구현하도록 초청 하는 의미

### 7. 설명 메세지
- 연산이 목적이 아닌, 의도를 명확하게 전달하기 위한 메소드
- 한줄주석을 사용하는 경우 설명 메세지를 적용을 고려해보기


## 예외흐름
- 주요 흐름은 명료하게 나타내라. 예외 흐름은 주요 흐름을 깨뜨리지 않는 범위 내에서 명료하게 표현하라

## 예외 흐름 처리 방법
### 1.보호절
- 주요 흐름에서 벗어날 필요가 있을때(예외상황) 보호절을 사용해서 차이점을 부각시킨다.
- 보호절은 여러개의 조건이 있을 경우 유용하다
  (중첩 조건절을 사용하는 것보다 보호절을 사용하면 이해하기 쉽다)
- 보호절의 다른 형태는 loop 내에서 continue를 사용하는 것이다.

### 2.예외
- 여러 함수 호출을 걸쳐 제어흐름을 바꾸는 경우를 표현할 때 유용
- 예외를 사용할 경우 단순한 흐름 구조 이외에 어떤 일이 벌어지는지 알아내야 하므로 코드를 일고 이하기가 어려워진다.
- 가능하면  `순차적 구문, 메시지, 루프, 제어문` 을 사용해 제어흐름을 표현하고 이 방법들이 주요흐름 이해를 방해할 때만 예외를 사용하라

### 3. 체크 예외
- 체크예외를 넘겨받을 수 있는 클래스는 모두 그 예외를 받거나 다른 클래스로 넘겨줘야 한다.
- 체크예외에는 다음과 같은 비용이 따른다
    - 체크예외는 메소드 선언에 사용되는 50% 이상의 공간은 차지
    - 코드 수정이 어려워짐

### 4. 예외 전달
- 하위 수준 예외를 상위 수준 예외로 포장하라.
